#!/bin/bash

{% set operator = 'install' %}
{% set version = '@latest' %}

{% if @('go.version') < 1.16 %}
    {% set operator = 'get' %}
    {% set version = '' %}
{% endif %}

function task_modules_before()
{
    {% for step in @('go.modules.before.steps') -%}
        {{ step|raw }}
    {% endfor %}

    {% if @('go.formatter') == 'goimports' %}
    go {{ operator }} golang.org/x/tools/cmd/goimports{{ version }}
    {% endif %}

    go {{ operator }} github.com/fzipp/gocyclo/cmd/gocyclo{{ version }}
    go {{ operator }} github.com/gordonklaus/ineffassign{{ version }}
}
