attributes:
  services:
    app:
      environment:
        APP_HOST: = @('hostname')

  pipeline:
    publish:
      enabled: no
    preview:
      enabled: no
      namespace: = @('workspace.name') ~ '-' ~ slugify(branch())
      hostname:  = @('pipeline.preview.namespace') ~ '.example.com'
    base:
      resourcePrefix: ~
      hostname: = @('pipeline.base.namespace') ~ '.example.com'
      services:
        app:
          environment:
            APP_HOST: = @('pipeline.base.hostname')
    qa:
      enabled: no
      namespace: = @('workspace.name') 
      hostname: = @('pipeline.qa.namespace') ~ '.' ~ @('domain')
      resourcePrefix: ~
      services:
        app:
          environment:
            APP_HOST: = @('pipeline.qa.hostname')
